{% extends 'portal/base.html' %}
{% load static %}

{% block title %}Acharya Nagarjuna University Library{% endblock %}

{% block content %}
<div class="container-fluid">
    <!-- Hero Section with Animation -->
    <div class="row mb-4">
        <div class="col-12">
            <h1 class="text-center mb-4 animate__animated animate__fadeInDown">Welcome to ANU Library</h1>
            <div class="hero-cards row g-3 justify-content-center animate__animated animate__fadeInUp">
                <div class="col-md-4">
                    <div class="hero-card text-center p-4 bg-primary text-white rounded animate__animated animate__zoomIn" style="animation-delay: 0.2s;">
                        <i class="fa-solid fa-book-open fa-3x mb-3 text-light"></i>
                        <h5 class="mb-2">Read Free Library Books Online</h5>
                        <p class="small mb-0">Access thousands of ANU digital books anytime, from campus or home.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="hero-card text-center p-4 bg-primary text-white rounded animate__animated animate__zoomIn" style="animation-delay: 0.4s;">
                        <i class="fa-solid fa-chart-line fa-3x mb-3 text-light"></i>
                        <h5 class="mb-2">Set a Yearly Reading Goal</h5>
                        <p class="small mb-0">Let our AI assistant suggest books and track your reading.</p>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="hero-card text-center p-4 bg-primary text-white rounded animate__animated animate__zoomIn" style="animation-delay: 0.6s;">
                        <i class="fa-solid fa-heart fa-3x mb-3 text-light"></i>
                        <h5 class="mb-2">Keep Track of Your Favourite Books</h5>
                        <p class="small mb-0">Organise books into lists like "Exam Prep", "Research", and "Fun Reads".</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Book Sections with Animations -->
    <div class="row mb-5">
        <!-- Trending Books -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 animate__animated animate__zoomIn">
                <div class="card-header bg-warning text-white">
                    <h5>Trending Books</h5>
                </div>
                <div class="card-body">
                    {% for book in trending_books %}
                        <div class="book-item mb-2 animate__animated animate__fadeIn">
                            <h6><a href="{% url 'book_detail' book.id %}">{{ book.title }}</a></h6>
                            <small>by {{ book.author }}</small>
                        </div>
                    {% empty %}
                        <p>No trending books available.</p>
                    {% endfor %}
                </div>
                <div class="card-footer">
                    <a href="{% url 'book_list' %}?trending=1" class="btn btn-outline-primary btn-sm">View All</a>
                </div>
            </div>
        </div>

        <!-- CS Books -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 animate__animated animate__zoomIn" style="animation-delay: 0.2s;">
                <div class="card-header bg-info text-white">
                    <h5>Computer Science Books</h5>
                </div>
                <div class="card-body">
                    {% for book in cs_books %}
                        <div class="book-item mb-2 animate__animated animate__fadeIn">
                            <h6><a href="{% url 'book_detail' book.id %}">{{ book.title }}</a></h6>
                            <small>by {{ book.author }}</small>
                        </div>
                    {% empty %}
                        <p>No CS books available.</p>
                    {% endfor %}
                </div>
                <div class="card-footer">
                    <a href="{% url 'book_list' %}?department=computer" class="btn btn-outline-primary btn-sm">View All</a>
                </div>
            </div>
        </div>

        <!-- Classics -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 animate__animated animate__zoomIn" style="animation-delay: 0.4s;">
                <div class="card-header bg-success text-white">
                    <h5>Classic Literature</h5>
                </div>
                <div class="card-body">
                    {% for book in classic_books %}
                        <div class="book-item mb-2 animate__animated animate__fadeIn">
                            <h6><a href="{% url 'book_detail' book.id %}">{{ book.title }}</a></h6>
                            <small>by {{ book.author }}</small>
                        </div>
                    {% empty %}
                        <p>No classic books available.</p>
                    {% endfor %}
                </div>
                <div class="card-footer">
                    <a href="{% url 'book_list' %}?subject=classic" class="btn btn-outline-primary btn-sm">View All</a>
                </div>
            </div>
        </div>

        <!-- Recently Returned -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 animate__animated animate__zoomIn" style="animation-delay: 0.6s;">
                <div class="card-header bg-secondary text-white">
                    <h5>Recently Returned</h5>
                </div>
                <div class="card-body">
                    {% for book in recently_returned %}
                        <div class="book-item mb-2 animate__animated animate__fadeIn">
                            <h6><a href="{% url 'book_detail' book.id %}">{{ book.title }}</a></h6>
                            <small>by {{ book.author }}</small>
                        </div>
                    {% empty %}
                        <p>No recently returned books.</p>
                    {% endfor %}
                </div>
                <div class="card-footer">
                    <a href="{% url 'book_list' %}?recently_returned=1" class="btn btn-outline-primary btn-sm">View All</a>
                </div>
            </div>
        </div>

        <!-- Kids Books -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 animate__animated animate__zoomIn" style="animation-delay: 0.8s;">
                <div class="card-header bg-danger text-white">
                    <h5>Kids Books</h5>
                </div>
                <div class="card-body">
                    {% for book in kids_books %}
                        <div class="book-item mb-2 animate__animated animate__fadeIn">
                            <h6><a href="{% url 'book_detail' book.id %}">{{ book.title }}</a></h6>
                            <small>by {{ book.author }}</small>
                        </div>
                    {% empty %}
                        <p>No kids books available.</p>
                    {% endfor %}
                </div>
                <div class="card-footer">
                    <a href="{% url 'book_list' %}?subject=children" class="btn btn-outline-primary btn-sm">View All</a>
                </div>
            </div>
        </div>

        <!-- Thriller Books -->
        <div class="col-md-6 col-lg-4 mb-4">
            <div class="card h-100 animate__animated animate__zoomIn" style="animation-delay: 1s;">
                <div class="card-header bg-dark text-white">
                    <h5>Thriller Books</h5>
                </div>
                <div class="card-body">
                    {% for book in thriller_books %}
                        <div class="book-item mb-2 animate__animated animate__fadeIn">
                            <h6><a href="{% url 'book_detail' book.id %}">{{ book.title }}</a></h6>
                            <small>by {{ book.author }}</small>
                        </div>
                    {% empty %}
                        <p>No thriller books available.</p>
                    {% endfor %}
                </div>
                <div class="card-footer">
                    <a href="{% url 'book_list' %}?subject=thriller" class="btn btn-outline-primary btn-sm">View All</a>
                </div>
            </div>
        </div>
    </div>

    <!-- E-Resources with Animation -->
    <div class="row mb-4 animate__animated animate__fadeInUp">
        <div class="col-12">
            <h3>E-Resources & Databases</h3>
            <div class="alphabet-nav d-flex flex-wrap justify-content-center">
                {% for l in 'ABCDEFGHIJKLMNOPQRSTUVWXYZ' %}
                    <a href="{% url 'eresource_list_view' l %}" class="btn btn-outline-secondary btn-sm m-1 animate__animated animate__pulse animate__infinite">{{ l }}</a>
                {% endfor %}
                <a href="{% url 'home' %}" class="btn btn-outline-secondary btn-sm m-1 animate__animated animate__pulse animate__infinite active btn-primary">All</a>
            </div>
            <div class="row mt-3 animate__animated animate__fadeInUp">
                {% if eresources %}
                    {% for eresource in eresources %}
                        <div class="col-md-6 col-lg-4 mb-4">
                            <div class="card h-100 animate__animated animate__zoomIn" style="animation-delay: {{ forloop.counter0|floatformat:1 }}s;">
                                <div class="card-body">
                                    <h5 class="card-title">
                                        <a href="{{ eresource.url }}" target="_blank" class="text-decoration-none">{{ eresource.name }}</a>
                                    </h5>
                                    <p class="card-text">{{ eresource.description|truncatewords:20 }}</p>
                                    <div class="mt-3">
                                        <a href="{{ eresource.url }}" target="_blank" class="btn btn-primary btn-sm">Access Resource</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <div class="col-12">
                        <div class="alert alert-info text-center animate__animated animate__fadeIn">
                            <h4>No E-Resources Found</h4>
                            <p>No e-resources available. Add some via the admin panel.</p>
                        </div>
                    </div>
                {% endif %}
            </div>
        </div>
    </div>

    <!-- News with Animation -->
    {% if news_items %}
    <div class="row mb-4 animate__animated animate__fadeInUp" style="animation-delay: 0.5s;">
        <div class="col-12">
            <h3>Library News</h3>
            <div class="row">
                {% for news in news_items %}
                    <div class="col-md-6 mb-3">
                        <div class="card animate__animated animate__slideInLeft">
                            <div class="card-body">
                                <h6>{{ news.title }}</h6>
                                <p class="small">{{ news.summary|truncatewords:20 }}</p>
                                <small class="text-muted">{{ news.published_on|date:"M d, Y" }}</small>
                            </div>
                        </div>
                    </div>
                {% endfor %}
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Library Services with Animations -->
    <div class="row animate__animated animate__fadeInUp" style="animation-delay: 1s; overflow-x: auto; white-space: nowrap; padding: 10px 0;">
        <div class="col-md-4 mb-3 d-inline-block" style="width: 300px; margin-right: 20px;">
            <div class="card h-100 animate__animated animate__zoomIn hover-lift" style="animation-delay: 1s; cursor: pointer;">
                <div class="card-img-top">
                    <img src="https://via.placeholder.com/300x200?text=Opening+Hours" alt="Opening Hours" class="img-fluid rounded-top animate__animated animate__tada" style="animation-delay: 1s;">
                </div>
                <div class="card-body text-center">
                    <h5 class="card-title">Opening Hours »</h5>
                    <p class="card-text">Find out the opening hours of each Acharya Nagarjuna University Library branch.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3 d-inline-block" style="width: 300px; margin-right: 20px;">
            <div class="card h-100 animate__animated animate__zoomIn hover-lift" style="animation-delay: 1.2s; cursor: pointer;">
                <div class="card-img-top">
                    <img src="https://via.placeholder.com/300x200?text=Ask+Librarian" alt="Ask Librarian" class="img-fluid rounded-top animate__animated animate__tada" style="animation-delay: 1.2s;">
                </div>
                <div class="card-body text-center">
                    <h5 class="card-title">Ask a Librarian »</h5>
                    <p class="card-text">Ask questions, get research help, and consult reference librarians.</p>
                </div>
            </div>
        </div>
        <div class="col-md-4 mb-3 d-inline-block" style="width: 300px;">
            <div class="card h-100 animate__animated animate__zoomIn hover-lift" style="animation-delay: 1.4s; cursor: pointer;">
                <div class="card-img-top">
                    <img src="https://via.placeholder.com/300x200?text=Study+Room" alt="Study Room" class="img-fluid rounded-top animate__animated animate__tada" style="animation-delay: 1.4s;">
                </div>
                <div class="card-body text-center">
                    <h5 class="card-title">Book a Study Room »</h5>
                    <p class="card-text">Reserve study spaces and reading rooms at ANU Central Library.</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Animate.css and Motion Effects -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css"/>
<style>
    .hover-lift {
        transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .hover-lift:hover {
        transform: translateY(-10px) scale(1.02);
        box-shadow: 0 10px 25px rgba(0,0,0,0.2) !important;
    }
    .row[style*="overflow-x: auto"] {
        scrollbar-width: thin;
        scrollbar-color: #6c757d #f8f9fa;
    }
    .row[style*="overflow-x: auto"]::-webkit-scrollbar {
        height: 8px;
    }
    .row[style*="overflow-x: auto"]::-webkit-scrollbar-track {
        background: #f8f9fa;
    }
    .row[style*="overflow-x: auto"]::-webkit-scrollbar-thumb {
        background: #6c757d;
        border-radius: 4px;
    }
</style>
<script src="{% static 'js/motion-effects.js' %}"></script>
<script>
    // Initialize motion effects on load
    document.addEventListener('DOMContentLoaded', function() {
        // Trigger motion effects if available
        if (typeof initMotionEffects === 'function') {
            initMotionEffects();
        }
        // Smooth scrolling for the services section if needed
        const servicesRow = document.querySelector('.row[style*="overflow-x: auto"]');
        if (servicesRow) {
            servicesRow.addEventListener('wheel', (e) => {
                if (e.deltaY > 0) {
                    servicesRow.scrollLeft += 100;
                } else {
                    servicesRow.scrollLeft -= 100;
                }
                e.preventDefault();
            }, { passive: false });
        }
    });
</script>
{% endblock %}
