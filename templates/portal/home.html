{% extends 'portal/base.html' %}
{% load static %}

{% block title %}ANU Library – Home{% endblock %}

{% block content %}
<section id="homeView" class="app-view">
  <!-- Hero cards -->
  <div class="hero-wrapper">
    <h2 class="hero-main-title mb-3">Welcome to ANU Library &raquo;</h2>
    <p class="hero-subtitle mb-4">Explore subscribed databases, online journals, and digital resources available through Acharya Nagarjuna University Library.</p>
    <div class="row g-3 align-items-stretch hero-row">
      <div class="col-auto d-flex align-items-center">
        <button class="hero-arrow-btn" title="Previous Slide">
          <i class="fa-solid fa-chevron-left"></i>
        </button>
      </div>

      <div class="col-lg-4 col-md-4">
        <a href="{% url 'eresource_list' '0' %}" class="text-decoration-none">
          <div class="hero-card">
            <div class="hero-icon">
              <i class="fa-solid fa-book-open fa-2x"></i>
            </div>
            <div class="hero-title">Read Free Library Books Online</div>
            <div class="hero-text">
              Access thousands of ANU digital books anytime, from campus or home.
            </div>
          </div>
        </a>
      </div>

      <div class="col-lg-4 col-md-4">
        <a href="{% url 'my_books' %}" class="text-decoration-none">
          <div class="hero-card">
            <div class="hero-icon">
              <i class="fa-solid fa-bullseye fa-2x"></i>
            </div>
            <div class="hero-title">Set a Yearly Reading Goal</div>
            <div class="hero-text">
              Let our AI assistant suggest books and track your reading.
            </div>
          </div>
        </a>
      </div>

      <div class="col-lg-4 col-md-4">
        <a href="{% url 'my_books' %}" class="text-decoration-none">
          <div class="hero-card">
            <div class="hero-icon">
              <i class="fa-solid fa-heart fa-2x"></i>
            </div>
            <div class="hero-title">Keep Track of Your Favourite Books</div>
            <div class="hero-text">
              Organise books into lists like “Exam Prep”, “Research”, and “Fun Reads”.
            </div>
          </div>
        </a>
      </div>

      <div class="col-auto d-flex align-items-center">
        <button class="hero-arrow-btn" title="Next Slide">
          <i class="fa-solid fa-chevron-right"></i>
        </button>
      </div>
    </div>
  </div>

  <!-- E-Resources & Databases Section -->
  <section class="py-5 bg-white">
    <div class="container">
      <h3 class="fw-bold">E-Resources & Databases &raquo;</h3>

      <!-- A-Z Filter -->
      <div class="mt-3 mb-4 d-flex flex-wrap gap-2">
        {% for letter in "ABCDEFGHIJKLMNOPQRSTUVWXYZ" %}
          <a href="{% url 'eresource_list' letter %}" class="btn btn-outline-dark btn-sm">
            {{ letter }}
          </a>
        {% endfor %}
        <a href="{% url 'eresource_list' '0' %}" class="btn btn-outline-dark btn-sm">#</a>
      </div>

      <!-- Feature Cards -->
      <div class="row g-4 mt-3">
        <div class="col-md-4">
          <a href="{% url 'opening_hours' %}" class="text-decoration-none d-block h-100 resource-card">
            <div class="card shadow-sm h-100">
              <div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 200px;">
                <i class="fa-solid fa-clock fa-3x text-primary"></i>
              </div>
              <div class="card-body">
                <h5 class="card-title">Opening Hours &raquo;</h5>
                <p class="card-text small">Find out the opening hours of each Acharya Nagarjuna University Library branch.</p>
              </div>
            </div>
          </a>
        </div>

        <div class="col-md-4">
          <a href="{% url 'ask_librarian' %}" class="text-decoration-none d-block h-100 resource-card">
            <div class="card shadow-sm h-100">
              <div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 200px;">
                <i class="fa-solid fa-question-circle fa-3x text-primary"></i>
              </div>
              <div class="card-body">
                <h5 class="card-title">Ask a Librarian &raquo;</h5>
                <p class="card-text small">Ask questions, get research help, and consult reference librarians.</p>
              </div>
            </div>
          </a>
        </div>

        <div class="col-md-4">
          <a href="{% url 'book_study_room' %}" class="text-decoration-none d-block h-100 resource-card">
            <div class="card shadow-sm h-100">
              <div class="card-img-top d-flex align-items-center justify-content-center bg-light" style="height: 200px;">
                <i class="fa-solid fa-chair fa-3x text-primary"></i>
              </div>
              <div class="card-body">
                <h5 class="card-title">Book a Study Room &raquo;</h5>
                <p class="card-text small">Reserve study spaces and reading rooms at ANU Central Library.</p>
              </div>
            </div>
          </a>
        </div>
      </div>

    </div>
  </section>

  <!-- SECTION: Computer Science -->
  <h6 class="section-heading mt-4">
    Computer Science
    <span class="small-text">Based on your department</span>
  </h6>
  <div class="book-strip">
    <button class="scroll-arrow left" onclick="scrollStrip('csStrip', -300)" title="Scroll left" aria-label="Scroll left">
      <i class="fa-solid fa-chevron-left"></i>
    </button>
    <div id="csStrip" class="book-scroller">
      {% for book in computer_science_books %}
        <div class="book-card">
          <div class="book-cover-container">
            {% if book.cover_image %}
              <img
                src="{{ book.cover_image.url }}"
                class="book-cover-img"
                alt="{{ book.title }}"
              />
            {% else %}
              <div class="book-cover-placeholder">
                {{ book.title|truncatechars:40 }}
              </div>
            {% endif %}
          </div>
          <div class="book-title">{{ book.title }}</div>
          <a href="{% url 'book_detail' book.id %}" class="btn btn-primary btn-sm book-btn">
            View
          </a>
        </div>
      {% empty %}
        <span class="small text-muted">No books found in this section.</span>
      {% endfor %}
    </div>
    <button class="scroll-arrow right" onclick="scrollStrip('csStrip', 300)" title="Scroll right" aria-label="Scroll right">
      <i class="fa-solid fa-chevron-right"></i>
    </button>
  </div>

  <!-- SECTION: Trending Books -->
  <h6 class="section-heading">Trending Books</h6>
  <div class="book-strip">
    <button class="scroll-arrow left" onclick="scrollStrip('trendingStrip', -300)" title="Scroll left" aria-label="Scroll left">
      <i class="fa-solid fa-chevron-left"></i>
    </button>
    <div id="trendingStrip" class="book-scroller">
      {% for book in trending_books %}
        <div class="book-card">
          {% if book.cover_image %}
            <img src="{{ book.cover_image.url }}" class="book-cover-img" alt="{{ book.title }}" />
          {% else %}
            <div class="book-cover-placeholder">
              {{ book.title|truncatechars:40 }}
            </div>
          {% endif %}
          <div class="book-title">{{ book.title }}</div>
          <a href="{% url 'book_detail' book.id %}" class="btn btn-primary btn-sm book-btn">
            View
          </a>
        </div>
      {% empty %}
        <span class="small text-muted">No trending books found.</span>
      {% endfor %}
    </div>
    <button class="scroll-arrow right" onclick="scrollStrip('trendingStrip', 300)" title="Scroll right" aria-label="Scroll right">
      <i class="fa-solid fa-chevron-right"></i>
    </button>
  </div>

  <!-- SECTION: Classic Books -->
  <h6 class="section-heading">Classic Books</h6>
  <div class="book-strip">
    <button class="scroll-arrow left" onclick="scrollStrip('classicStrip', -300)" title="Scroll left" aria-label="Scroll left">
      <i class="fa-solid fa-chevron-left"></i>
    </button>
    <div id="classicStrip" class="book-scroller">
      {% for book in classic_books %}
        <div class="book-card">
          <div class="book-cover-container">
            {% if book.cover_image %}
              <img src="{{ book.cover_image.url }}" class="book-cover-img" alt="{{ book.title }}" />
            {% else %}
              <div class="book-cover-placeholder">
                {{ book.title|truncatechars:40 }}
              </div>
            {% endif %}
          </div>
          <div class="book-title">{{ book.title }}</div>
          <a href="{% url 'book_detail' book.id %}" class="btn btn-primary btn-sm book-btn">
            View
          </a>
        </div>
      {% empty %}
        <span class="small text-muted">No classic books found.</span>
      {% endfor %}
    </div>
    <button class="scroll-arrow right" onclick="scrollStrip('classicStrip', 300)" title="Scroll right" aria-label="Scroll right">
      <i class="fa-solid fa-chevron-right"></i>
    </button>
  </div>

  <!-- SECTION: Recently Returned -->
  <h6 class="section-heading">Recently Returned</h6>
  <div class="book-strip">
    <div id="recentStrip" class="book-scroller">
      {% for book in recently_returned %}
        <div class="book-card">
          <div class="book-cover-container">
            {% if book.cover_image %}
              <img src="{{ book.cover_image.url }}" class="book-cover-img" alt="{{ book.title }}" />
            {% else %}
              <div class="book-cover-placeholder">
                {{ book.title|truncatechars:40 }}
              </div>
            {% endif %}
          </div>
          <div class="book-title">{{ book.title }}</div>
          <a href="{% url 'book_detail' book.id %}" class="btn btn-primary btn-sm book-btn">
            View
          </a>
        </div>
      {% empty %}
        <span class="small text-muted">No recent returns.</span>
      {% endfor %}
    </div>
  </div>

  <!-- SECTION: Kids -->
  <h6 class="section-heading">Kids</h6>
  <div class="book-strip">
    <div class="book-scroller">
      {% for book in kids_books %}
        <div class="book-card">
          <div class="book-cover-container">
            {% if book.cover_image %}
              <img src="{{ book.cover_image.url }}" class="book-cover-img" alt="{{ book.title }}" />
            {% else %}
              <div class="book-cover-placeholder">
                {{ book.title|truncatechars:40 }}
              </div>
            {% endif %}
          </div>
          <div class="book-title">{{ book.title }}</div>
          <a href="{% url 'book_detail' book.id %}" class="btn btn-primary btn-sm book-btn">
            View
          </a>
        </div>
      {% empty %}
        <span class="small text-muted">No kids books configured.</span>
      {% endfor %}
    </div>
  </div>

  <!-- SECTION: Thriller -->
  <h6 class="section-heading">Thriller</h6>
  <div class="book-strip mb-5">
    <div class="book-scroller">
      {% for book in thriller_books %}
        <div class="book-card">
          <div class="book-cover-container">
            {% if book.cover_image %}
              <img src="{{ book.cover_image.url }}" class="book-cover-img" alt="{{ book.title }}" />
            {% else %}
              <div class="book-cover-placeholder">
                {{ book.title|truncatechars:40 }}
              </div>
            {% endif %}
          </div>
          <div class="book-title">{{ book.title }}</div>
          <a href="{% url 'book_detail' book.id %}" class="btn btn-primary btn-sm book-btn">
            View
          </a>
        </div>
      {% empty %}
        <span class="small text-muted">No thriller books configured.</span>
      {% endfor %}
    </div>
  </div>
</section>
{% endblock %}
